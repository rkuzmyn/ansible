(self.webpackJsonp__wix_thunderbolt_app=self.webpackJsonp__wix_thunderbolt_app||[]).push([[8450],{66017:function(t,n,e){"use strict";e.r(n),e.d(n,{editor:function(){return A},page:function(){return b}});var i=e(31191),o=e(61049),r=e(63788),a=e(43757),s=e(11717),c=function(t){return t+"-screenIn"},u=function(){function t(t){this.animator=t,this.definitions={},this.sessionState={played:new Map,running:new Map}}return t.prototype._shouldSkipPlayedAnimation=function(t){var n=this.sessionState.played.has(t),e=this.sessionState.played.get(t)||{},i=e.playOnce,o=e.persistOnNav;return n&&(i||o)},t.prototype._hideComponent=function(t){var n=document.querySelector("#"+t);n&&(n.style.opacity=0)},t.prototype.unhideComponent=function(t){var n=document.querySelector("#"+t);n&&(n.style.opacity="",n.style.visibility="inherit")},t.prototype._addAnimatingClass=function(t){var n=document.getElementById(t);n&&n.classList.add("animating-screenIn")},t.prototype._addExitAnimatingClass=function(t){var n=document.getElementById(t);n&&(n.classList.remove("animating-screenIn"),n.classList.add("animating-screenIn-exit"))},t.prototype.updateDefinitions=function(t){this.definitions=(0,i.pi)((0,i.pi)({},this.definitions),t)},t.prototype._hideCompBeforeAnimation=function(t){var n=c(t);this._shouldSkipPlayedAnimation(n)?this.unhideComponent(t):this._hideComponent(t)},t.prototype.hideBeforeAnimation=function(t){var n=this;this.getCompsToHide(t).forEach((function(t){var e=t.compId;n._hideCompBeforeAnimation(e)}))},t.prototype.handleRotation=function(t,n){t.setAttribute("data-angle",String(n)),t.setAttribute("data-angle-style-location","style")},t.prototype.trigger=function(t){var n=this;void 0===t&&(t=[]),t.reduce((function(t,e){var i=e.compId,o=n.definitions[i]||[];return t.concat(o)}),[]).forEach((function(t){var e=t.action,o=(0,i._T)(t,["action"]);return n.executeAnimation(e,o)}))},t.prototype.init=function(t){this.updateDefinitions(t),this.stopAnimations(),this.hideBeforeAnimation(t)},t.prototype.addDefinition=function(t,n,e){this.handleRotation(n,e),this.updateDefinitions(t)},t.prototype.executeAnimation=function(t,n){var e=this,i=n.name,o=n.targetId,r=n.duration,a=void 0===r?0:r,s=n.delay,u=void 0===s?0:s,p=n.playOnce,d=void 0!==p&&p,f=n.persistOnNav,l=void 0!==f&&f,m=n.params,v=void 0===m?{}:m,h=c(o);if(this._shouldSkipPlayedAnimation(h))this.unhideComponent(o);else{var g={name:i,targetId:o,duration:a,delay:u,params:v},y={name:"BaseClear",targetId:o,duration:0,delay:0,params:{props:"clip,clipPath,webkitClipPath,willChange,opacity,transform,transformOrigin",immediateRender:!1}};this.animator.runSequence([{type:"Animation",data:g},{type:"Animation",data:y}],{callbacks:{onStart:function(n){e._addAnimatingClass(o),e.sessionState.running.set(n,{targetId:o,action:t})},onComplete:function(t){e._addExitAnimatingClass(o),e.sessionState.running.delete(t)},onInterrupt:function(t){e._addExitAnimatingClass(o),e.sessionState.running.delete(t)}}}),this.sessionState.played.set(h,{playOnce:d,persistOnNav:l})}},t.prototype.stopAnimations=function(t){var n=this,e=(void 0===t?{}:t).skipPersistent,i=void 0===e||e;this.sessionState.running.forEach((function(t,e){var o=t.targetId,r=c(o);i&&n.sessionState.played.get(r).persistOnNav||n.animator.kill(e,1)}))},t.prototype.getAnimationProperties=function(t){return this.animator.getAnimationProperties(t)},t.prototype.getCompsToHide=function(t){var n=this;return Object.entries(t).reduce((function(t,e){var o=(0,i.CR)(e,2),r=o[0];return o[1].some((function(t){var e=t.name,i=n.animator.getAnimationProperties(e);return i&&i.hideOnStart}))&&t.push({compId:r}),t}),[])},t.prototype.clearState=function(){this.sessionState.played.clear(),this.sessionState.running.clear()},t}(),p=e(18562);function d(t){var n=t.manager,e={};function i(t){var e=t.filter((function(t){return t.visible})).map((function(t){return{compId:t.id,action:"screenIn"}}));n.trigger(e)}function o(t,n){var o=e[n]||function(t,n){var e={root:null,rootMargin:"0px",threshold:[n]};return new window.IntersectionObserver((function(n,e){var i=n.map((function(t){return{visible:t.isIntersecting,ratio:t.intersectionRatio,rect:t.intersectionRect,id:t.target.id}}));n.forEach((function(t){return t.isIntersecting&&e.unobserve(t.target)})),t(i)}),e)}(i,n);o.observe(t),e[n]||(e[n]=o)}return{start:function(t,e,i){var r=window.innerHeight;e&&o(e,e.offsetHeight>r?.01:function(t,n){return t.getAnimationProperties(n).viewportThreshold}(n,i))},stop:function(){Object.values(e).forEach((function(t){return t.disconnect()}))}}}var f=(0,a.ff)([(0,a.t6)(o.$e,p.u2),(0,a.t6)(o.Wf,p.u2),r.m,(0,a.jt)(s.FK)],(function(t,n,e,o){return function(){var r=t.compIdToActions,a=t.compIdToRotations;if(o){var s=o.getInstance().then((function(t){var e,o,a=null!==(o=null===(e=n.get())||void 0===e?void 0:e.screenInManager)&&void 0!==o?o:new u(t);a.init(r);var s=d({manager:a});return n.update((function(t){return(0,i.pi)((0,i.pi)({},t),{screenInManager:a,viewport:s})})),{animations:s,screenInManager:a}}));return function(t,n,o){return(0,i.mG)(void 0,void 0,void 0,(function(){var c,u,p,d,f,l;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return o?[4,s]:[2];case 1:return c=i.sent(),u=c.animations,p=c.screenInManager,e?(p.unhideComponent(t),[2]):(d=r[t],n!==t&&((f=JSON.parse(JSON.stringify(d)))[0].targetId=n,d=f),p.addDefinition(((l={})[n]=d,l),o,a[t]),u.start(n,o,d[0].name),[2])}}))}))}}}})),l=e(32979),m=(0,a.ff)([(0,a.t6)(o.$e,p.u2),p.cL,l.C],(function(t,n,e){return{pageWillMount:function(){var i=n();if(i){var o=Object.keys(t.compIdToActions||{});e.registerToCompLifeCycle(o,p.IA,i)}}}})),v=(0,a.ff)([(0,a.t6)(o.$e,p.u2),(0,a.t6)(o.Wf,p.u2),l.C,r.m],(function(t,n,e,i){return{pageWillUnmount:function(){var o;if(!i){var r=Object.keys(t.compIdToActions||{});e.unregisterToCompLifeCycle(r,p.IA),null===(o=n.get())||void 0===o||o.viewport.stop()}}}})),h=e(59032),g=e(15313),y=Symbol("DSViewModeAPISymbol"),I="ScreenInDSCallback",C=(0,a.ff)([(0,a.t6)(o.$e,p.u2),(0,a.t6)(o.Wf,p.u2),p.cL,l.C,g._v,y],(function(t,n,e,o,r,a){var s=new Set,c=!1,u="desktop",d={};function f(t){d={},s.size&&(o.unregisterToCompLifeCycle((0,i.ev)([],(0,i.CR)(s)),I),s.clear());var e=n.get();e&&(e.viewport.stop(),t&&e.screenInManager.clearState())}function l(n){var p=n.shouldEnableScreenIn,l=n.viewMode;if(u=l,c=p){var m=Object.keys(t.compIdToActions||{}),v=a.isDuringViewModeSwitch();m.forEach((function(t){return s.add(t)})),o.registerToCompLifeCycle(m,I,(function(t,n,e){d[t]=[n,e]})),r.registerToRenderDone((function(){v&&f(!0);var t=e();t&&m.forEach((function(n){var e=(0,i.CR)(d[n],2),o=e[0],r=e[1];t(n,o,r)}))}),{once:!0})}else f(!c)}return{featureName:p.u2,appWillLoadPage:function(){f(!c),l({shouldEnableScreenIn:c,viewMode:u})},handlers:{toggleScreenIn:l}}})),S=e(97478),A=function(t){t(p.cL).to(f),t(S.ZK,h.j.AppWillLoadPageHandler).to(C)},b=function(t){t(p.cL).to(f),t(h.j.PageWillMountHandler).to(m),t(h.j.PageWillUnmountHandler).to(v)}}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/screenIn.62f75a23.chunk.min.js.map